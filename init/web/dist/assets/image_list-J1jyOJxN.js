import{_ as S}from"./gvb_table.vue_vue_type_style_index_0_lang-DLBiV87R.js";import{a as z}from"./image_api-mDpDKLVJ.js";import{_ as I,d as b,i as L,j as v,k as j,o as h,b as y,n as B,l as T,g as w,u as D,a as f,e as l,w as d,p as _,f as E,H,M as k,r as m,Z as M}from"./index-C_OMfqPK.js";const P=b({name:"IconDownload",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:s}){const n=L("icon"),r=v(()=>[n,`${n}-download`,{[`${n}-spin`]:e.spin}]),c=v(()=>{const o={};return e.size&&(o.fontSize=j(e.size)?`${e.size}px`:e.size),e.rotate&&(o.transform=`rotate(${e.rotate}deg)`),o});return{cls:r,innerStyle:c,onClick:o=>{s("click",o)}}}}),U=["stroke-width","stroke-linecap","stroke-linejoin"],V=w("path",{d:"m33.072 22.071-9.07 9.071-9.072-9.07M24 5v26m16 4v6H8v-6"},null,-1),A=[V];function O(e,s,n,r,c,p){return h(),y("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:B(e.cls),style:T(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:s[0]||(s[0]=(...o)=>e.onClick&&e.onClick(...o))},A,14,U)}var g=I(P,[["render",O]]);const W=Object.assign(g,{install:(e,s)=>{var n;const r=(n=s==null?void 0:s.iconPrefix)!=null?n:"";e.component(r+g.name,g)}}),q={class:"image_list_view"},Z=["href","download"],K=b({__name:"image_list",setup(e){const s=D(),n=f([]),r=f();function c(){r.value.getList(),n.value=[]}const p=[{title:"文件名",dataIndex:"name"},{title:"上传类型",dataIndex:"image_type",render:u=>{const t=u.record;let i="red";return t.image_type==="本地"&&(i="blue"),H(M,{color:i},{default:()=>t.image_type})}},{title:"预览",slotName:"path"},{title:"banner数",dataIndex:"bannerCount"},{title:"文章数",dataIndex:"articleCount"},{title:"上传时间",slotName:"created_at"},{title:"操作",slotName:"action"}],o=f(!1);function C(u){const t=u.response;t.data.length>0&&t.data.forEach(i=>{if(!i.is_success){k.error(i.msg);return}k.success(i.msg)})}return(u,t)=>{const i=m("a-upload"),x=m("a-modal"),$=m("a-image"),N=m("a-button");return h(),y("div",q,[l(x,{title:"图片上传",visible:o.value,"onUpdate:visible":t[1]||(t[1]=a=>o.value=a),onOk:c},{default:d(()=>[l(i,{"list-type":"picture-card",action:"/api/images",name:"images",headers:{token:_(s).userInfo.token},"file-list":n.value,"onUpdate:fileList":t[0]||(t[0]=a=>n.value=a),"image-preview":"",class:"gvb_image_upload",multiple:"",onSuccess:C},null,8,["headers","file-list"])]),_:1},8,["visible"]),l(S,{url:_(z),columns:p,"default-delete":"","add-label":"上传图片","no-confirm":"","no-edit":"",ref_key:"gvbTable",ref:r,"search-placeholder":"搜索图片名称",onAdd:t[2]||(t[2]=a=>o.value=!0)},{path:d(({record:a})=>[l($,{src:a.path,style:{"border-radius":"5px"},height:"50px"},null,8,["src"])]),action_left:d(({record:a})=>[w("a",{style:{"margin-right":"10px"},href:a.path,download:a.name},[l(N,{type:"primary"},{icon:d(()=>[l(_(W))]),default:d(()=>[t[3]||(t[3]=E(" 图片下载 "))]),_:1})],8,Z)]),_:1},8,["url"])])}}});export{K as default};
